<UserControl x:Class="CustomFadeAnim.CustomFadeAnimSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             Background="{DynamicResource ControlBackgroundBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border Background="Transparent" Padding="16" Margin="0,20,0,0" HorizontalAlignment="Center">
            <DockPanel>
                <Image Source="/CustomFadeAnim;component/Resources/plugin_logo.png"
                       Width="48" Height="48"
                       Stretch="Uniform"
                       Margin="0,-5,20,5"
                       DockPanel.Dock="Left"/>
                <StackPanel>
                    <TextBlock Text="Custom Fade Animations by V"
                               FontSize="20"
                               FontWeight="Bold"
                               Foreground="{DynamicResource TextBrush}"/>
                    <TextBlock Text="Customizable Transitions for Background Images"
                               FontSize="12"
                               Foreground="{DynamicResource TextBrush}"
                               Opacity="0.85"/>
                </StackPanel>
            </DockPanel>
        </Border>
        <ScrollViewer Grid.Row="1" Padding="16">
            <StackPanel Orientation="Vertical" Margin="16" VerticalAlignment="Top">

                <Border Background="{DynamicResource ControlBackgroundBrush}"
                        CornerRadius="6"
                        Padding="12" Margin="0,0,0,20"
                        BorderBrush="{DynamicResource NormalBorderBrush}"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Select animation"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Foreground="{DynamicResource TextBrush}"
                                   Margin="0,0,0,8"/>
                        <ComboBox Width="240"
                                  ItemsSource="{Binding Settings.AvailableAnimations}"
                                  SelectedItem="{Binding Settings.SelectedAnim, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Text="{Binding Settings.SelectedAnimDescription}"
TextWrapping="Wrap"
Margin="0,10,0,10" VerticalAlignment="Center" HorizontalAlignment="Center"
Foreground="{DynamicResource TextBrush}"
Opacity="0.8" />
                    </StackPanel>
                </Border>

                <Border Background="{DynamicResource ControlBackgroundBrush}"
        CornerRadius="6"
        Padding="12" Margin="0,0,0,20"
        BorderBrush="{DynamicResource NormalBorderBrush}"
        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="Global"
           FontWeight="Bold"
           FontSize="14"
           Foreground="{DynamicResource TextBrush}"
           Margin="0,0,0,8"/>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Image Source Update Delay (ms)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding Settings.SourceUpdateDelay, StringFormat= 0 ms}"
       Margin="8,0,0,0"
       VerticalAlignment="Center"
       Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="0" Maximum="1000" TickFrequency="100"
Value="{Binding Settings.SourceUpdateDelay, Mode=TwoWay}" MaxWidth="500"
Margin="0,0,0,12"/>

                    </StackPanel>
                </Border>
                <!-- Parameters card -->
                <Border Background="{DynamicResource ControlBackgroundBrush}"
                        CornerRadius="6"
                        Padding="12"
                        BorderBrush="{DynamicResource NormalBorderBrush}"
                        BorderThickness="1">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Settings.SelectedAnim}" Value="Default">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <StackPanel>
                        <TextBlock Text="Parameters"
                                   FontWeight="Bold"
                                   FontSize="14"
                                   Foreground="{DynamicResource TextBrush}"
                                   Margin="0,0,0,8"/>

                        <StackPanel Orientation="Horizontal" Margin="0,8,0,8" Visibility="{Binding EnableSlideZoomVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Zoom in to remove empty borders in slide" VerticalAlignment="Center" Margin="0,-10,40,0" Foreground="{DynamicResource TextBrush}"/>
                            <CheckBox VerticalAlignment="Center" Margin="0,-5,0,0" IsChecked="{Binding CurrentParams.EnableSlideZoom}"/>
                        </StackPanel>
                            

                                <!-- Slide direction -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding SlideDirectionVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Slide direction" VerticalAlignment="Center" Margin="0,-10,0,0" Foreground="{DynamicResource TextBrush}"/>
                            <ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType=UserControl}, Path=SlideDirectionValues}"
          SelectedItem="{Binding CurrentParams.SlideDirection, Mode=TwoWay}"
          Visibility="{Binding SlideDirectionVisibility}"
          Margin="8,0,0,12"
          Width="150">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding}" Value="FromTop">
                                                            <Setter Property="Text" Value="From Top"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding}" Value="FromBottom">
                                                            <Setter Property="Text" Value="From Bottom"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding}" Value="FromLeft">
                                                            <Setter Property="Text" Value="From Left"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding}" Value="FromRight">
                                                            <Setter Property="Text" Value="From Right"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </StackPanel>

                        <!-- Animation duration -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding DurationVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Animation duration (s)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.Duration, StringFormat= 0.00 s}"
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="0.05" Maximum="1" MaxWidth="500"
                                Value="{Binding CurrentParams.Duration, Mode=TwoWay}"
                                Visibility="{Binding DurationVisibility}" 
                                Margin="0,0,0,12"/>

                        <!-- Initial zoom -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding ZoomStartVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Initial zoom" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.ZoomStart, StringFormat= 0.00 x}"
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="0.5" Maximum="2.0" MaxWidth="500"
                                Value="{Binding CurrentParams.ZoomStart, Mode=TwoWay}"
                                Visibility="{Binding ZoomStartVisibility}" 
                                Margin="0,0,0,12"/>

                        <!-- Slide distance -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding SlideDistanceVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Slide distance (px)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.SlideDistance, StringFormat= 0 px}"
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="-200" Maximum="200" MaxWidth="500"
                                Value="{Binding CurrentParams.SlideDistance, Mode=TwoWay}"
                                Visibility="{Binding SlideDistanceVisibility}" 
                                Margin="0,0,0,12"/>

                        <!-- Slide duration -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding SlideDurationVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Slide duration (s)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.SlideDuration, StringFormat= 0.00 s}"
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="0.05" Maximum="1" MaxWidth="500"
                                Value="{Binding CurrentParams.SlideDuration, Mode=TwoWay}"
                                Visibility="{Binding SlideDurationVisibility}" 
                                Margin="0,0,0,12"/>

                        <!-- Rotate angle -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding RotateAngleVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Rotate angle (deg)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.RotateAngle, StringFormat= 0.0°}"
               Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="-180" Maximum="180" TickFrequency="1"
        Value="{Binding CurrentParams.RotateAngle, Mode=TwoWay}" MaxWidth="500"
        Visibility="{Binding RotateAngleVisibility}" Margin="0,0,0,12"/>

                        <!-- Skew angle -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding SkewAngleVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Skew angle (deg)" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.SkewAngle, StringFormat= 0.0°}"
               Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="-89" Maximum="89" TickFrequency="1"
        Value="{Binding CurrentParams.SkewAngle, Mode=TwoWay}" MaxWidth="500"
        Visibility="{Binding SkewAngleVisibility}" Margin="0,0,0,12"/>

                        <!-- Blur radius -->
                        <StackPanel Orientation="Horizontal" Visibility="{Binding BlurRadiusVisibility}" VerticalAlignment="Center">
                            <TextBlock Text="Blur radius" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                            <TextBlock Text="{Binding CurrentParams.BlurRadius, StringFormat= 0.0}"
               Margin="8,0,0,0" VerticalAlignment="Center" Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                        <Slider Minimum="0" Maximum="100" TickFrequency="1"
        Value="{Binding CurrentParams.BlurRadius, Mode=TwoWay}" MaxWidth="500"
        Visibility="{Binding BlurRadiusVisibility}" Margin="0,0,0,12"/>


                        <StackPanel Orientation="Horizontal">
                            <!-- Reset button -->
                            <Button Content="Reset to defaults"
        Margin="0,8,0,0"
        Padding="10,5"
        HorizontalAlignment="Left"
        Click="ResetButton_Click"
        Background="{DynamicResource NormalBrush}"
        Foreground="{DynamicResource TextBrush}"
        FontWeight="Bold"
        BorderThickness="0"
        Cursor="Hand"/>
                            <TextBlock Text="Restart Playnite to Apply Changes" Opacity="0.5"
Margin="20,10,0,0" VerticalAlignment="Center" HorizontalAlignment="Right" Foreground="{DynamicResource TextBrush}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
